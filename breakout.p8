pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
ball_r = 2
ball_x = 10 + ball_r
ball_y = 1 + ball_r
ball_dx = 2
ball_dy = 2

pad_x = 30
pad_y = 123
pad_w = 24
pad_h = 3
pad_dx = 15
pad_s = 4
function _update()
    if btn(0) then
        pad_dx = -pad_s;
    end
    if btn(1) then
        pad_dx = pad_s;
    end
    pad_x += pad_dx 
    --limit pad to the left and right bound
    pad_x = min(max(0, pad_x), 127 - pad_w)
    ball_x += ball_dx
    ball_y += ball_dy
    -- check if ball hits pad
    if ball_box(pad_x, pad_y, pad_w, pad_h) then
        local slp
        slp = ball_dx/ball_dy
        ball_dy = -ball_dy
        sfx(0)
    end
    if ball_x > 127 - ball_r or ball_x < 0 + ball_r then
        ball_dx = -ball_dx
    end
    if ball_y > 127 - ball_r or ball_y < 0 + ball_r then
        ball_dy = -ball_dy
    end
    pad_dx *= 0.7
end

function _draw()
    cls(1)
    circfill(ball_x, ball_y, ball_r, 10)
    rectfill(pad_x, pad_y, pad_x + pad_w, pad_y + pad_h, 7)
end

-- ball collision check
function ball_box(box_x, box_y, box_w, box_h)
    if ball_y - ball_r >= box_y + box_h then
        return false
    end
    if ball_y + ball_r <= box_y then
        return false
    end
    if ball_x - ball_r >= box_x + box_w then
        return false
    end
    if ball_x + ball_r <= box_x then
        return false
    end
    return true
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100001605016050160501605016050160500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
